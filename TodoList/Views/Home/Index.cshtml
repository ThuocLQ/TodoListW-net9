@model TodoList.Models.TodoListViewModel
@{
    ViewData["Title"] = "Todo List";
}

<div class="container mt-4">

    <h2 class="mb-3">📌 Todo List</h2>

    <!--Action chuyển sang form thêm mới -->
    <div class="d-flex gap-2 mb-4">
        <a href="/Home/Add" class="btn btn-primary">➕ Add</a>
    </div>

    @if (Model.Items != null && Model.Items.Any())
    {
        <ul class="list-group">
            @foreach (var item in Model.Items)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <input type="hidden" name="id" value="@item.Id" />
                        <input type="checkbox" 
                               onchange="fetch('/Home/MarkComplete?id=@item.Id', { method: 'POST' }).then(()=>location.reload())"
                               @(item.IsCompleted ? "checked" : "") />

                        <span class="ms-2 @(item.IsCompleted ? "text-decoration-line-through text-muted" : "")">
                            @item.Text 
                        </span>
                        <span class="ms-1">
                            @item.IsCompleted.ToString()
                        </span>
                    </div>


                    <!-- Group nút hành động -->
                    <div class="btn-group">

                        <!-- Edit -->
                        <a href="/Home/Edit/@item.Id"
                           class="btn btn-sm btn-warning">
                            ✏ Edit
                        </a>

                        <form asp-action="Delete" method="post" class="d-inline">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@item.Id" />
                            <button type="submit" class="btn btn-sm btn-danger">🗑 Delete</button>
                        </form>

                    </div>

                </li>
            }
        </ul>
    }
    else
    {
        <p class="text-muted">No items yet. Add something!</p>
    }

</div>